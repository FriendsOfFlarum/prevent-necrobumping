(()=>{var t={n:e=>{var o=e&&e.__esModule?()=>e.default:()=>e;return t.d(o,{a:o}),o},d:(e,o)=>{for(var n in o)t.o(o,n)&&!t.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:o[n]})},o:(t,e)=>Object.prototype.hasOwnProperty.call(t,e),r:t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})}},e={};(()=>{"use strict";t.r(e),t.d(e,{components:()=>I});const o=flarum.core.compat["forum/app"];var n=t.n(o);const r=flarum.core.compat["common/extend"],a=flarum.core.compat["forum/components/ReplyComposer"];var i=t.n(a);function c(t,e){return c=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},c(t,e)}const s=flarum.core.compat["common/Component"];var u=t.n(s);const p=flarum.core.compat["common/components/Checkbox"];var f=t.n(p);const d=flarum.core.compat["common/utils/Stream"];var l=t.n(d);const v=flarum.core.compat["common/utils/ItemList"];var b=t.n(v);flarum.core.compat["common/components/LinkButton"];const h=flarum.core.compat["common/components/Link"];var g=t.n(h);const y=flarum.core.compat["forum/components/IndexPage"];var w=t.n(y),_=function(t){function e(){return t.apply(this,arguments)||this}var o,r;r=t,(o=e).prototype=Object.create(r.prototype),o.prototype.constructor=o,c(o,r);var a=e.prototype;return a.oninit=function(e){t.prototype.oninit.call(this,e),this.checked=l()(!1)},a.view=function(){return m("div",null,m("div",{className:"Alert"},m("div",{className:"Alert-body"},this.viewItems().toArray())))},a.viewItems=function(){var t=new(b()),e=n().data["fof-prevent-necrobumping.message.agreement"];return t.add("hide",m("div",{className:"hide"},this.alertItems().toArray()),100),t.add("checkbox",m(f(),{state:this.checked(),onchange:this.onchange.bind(this)},e||n().translator.trans("fof-prevent-necrobumping.forum.composer.warning.checkbox_label")),90),t},a.alertItems=function(){var t=new(b()),e=n().data["fof-prevent-necrobumping.message.title"],o=n().data["fof-prevent-necrobumping.message.description"],r=dayjs().add(this.attrs.days,"days").fromNow(!0);if(t.add("title",m("h4",null,e&&e.replace(/\[time]/i,r)||n().translator.trans("fof-prevent-necrobumping.forum.composer.warning.title",{time:r})),100),o)t.add("description",m("p",null,o),90);else{var a=n().translator.trans("fof-prevent-necrobumping.forum.composer.warning.description"),i=m("p",null,a);if(n().forum.attribute("fof-prevent-necrobumping.show_discussion_cta")&&n().forum.attribute("canStartDiscussion")){var c=n().translator.trans("fof-prevent-necrobumping.forum.composer.warning.cta"),s=n().translator.trans("fof-prevent-necrobumping.forum.composer.warning.cta_button"),u=m(g(),{onclick:function(t){var e;t.preventDefault(),void 0===e&&(e=w().prototype),w().prototype.newDiscussionAction.call(e).catch((function(){}))}},s);i=m("p",null,a," ",c," ",u)}t.add("description",i,90)}return t},a.onchange=function(){var t=!this.checked(),e=setInterval((function(){return m.redraw()}));t?this.$(".hide").slideUp(250,(function(){return clearInterval(e)})):this.$(".hide").slideDown(250,(function(){return clearInterval(e)})),this.attrs.set(t),this.checked(t)},e}(u()),k=function(t,e){if(!e)return!1;if(t.initializers.has("fof-byobu")&&e.isPrivateDiscussion())return!1;var o=e.attribute("fof-prevent-necrobumping"),n=e.lastPostedAt();return!!(n&&o&&dayjs().subtract(o,"days").isAfter(n.getTime()))&&o};n().initializers.add("fof/prevent-necrobumping",(function(){(0,r.override)(i().prototype,"view",(function(t,e){return this.attrs.disabled=this.attrs.disabled||k(n(),this.attrs.discussion)&&!this.composer.fields.fofNecrobumping,t(e)})),(0,r.extend)(i().prototype,"headerItems",(function(t){var e=this,o=k(n(),this.attrs.discussion);o&&t.add("fof-necrobumping",_.component({days:o,set:function(t){return e.composer.fields.fofNecrobumping=t}}))})),(0,r.extend)(i().prototype,"data",(function(t){t["fof-necrobumping"]=this.composer.fields.fofNecrobumping}))}));var I={NecrobumpingCheck:_}})(),module.exports=e})();
//# sourceMappingURL=forum.js.map