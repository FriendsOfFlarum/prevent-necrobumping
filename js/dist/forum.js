(()=>{var e={n:t=>{var o=t&&t.__esModule?()=>t.default:()=>t;return e.d(o,{a:o}),o},d:(t,o)=>{for(var r in o)e.o(o,r)&&!e.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:o[r]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r:e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}},t={};(()=>{"use strict";e.r(t),e.d(t,{components:()=>v});const o=flarum.core.compat["forum/app"];var r=e.n(o);const n=flarum.core.compat["common/extend"],i=flarum.core.compat["forum/components/ReplyComposer"];var a=e.n(i);function c(e,t){return c=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},c(e,t)}const s=flarum.core.compat["common/Component"];var p=e.n(s);const u=flarum.core.compat["common/components/Checkbox"];var f=e.n(u);const d=flarum.core.compat["common/utils/Stream"];var l=e.n(d),h=function(e){function t(){return e.apply(this,arguments)||this}var o,n;n=e,(o=t).prototype=Object.create(n.prototype),o.prototype.constructor=o,c(o,n);var i=t.prototype;return i.oninit=function(t){e.prototype.oninit.call(this,t),this.checked=l()(!1)},i.view=function(){var e=r().data["fof-prevent-necrobumping.message.title"],t=r().data["fof-prevent-necrobumping.message.description"],o=r().data["fof-prevent-necrobumping.message.agreement"],n=dayjs().add(this.attrs.days,"days").fromNow(!0);return m("div",null,m("div",{className:"Alert"},m("div",{className:"Alert-body"},m("div",{className:"hide"},m("h4",null,e&&e.replace(/\[time]/i,n)||r().translator.trans("fof-prevent-necrobumping.forum.composer.warning.title",{time:n})),m("p",null,t||r().translator.trans("fof-prevent-necrobumping.forum.composer.warning.description"))),m(f(),{state:this.checked(),onchange:this.onchange.bind(this)},o||r().translator.trans("fof-prevent-necrobumping.forum.composer.warning.checkbox_label")))))},i.onchange=function(){var e=!this.checked(),t=setInterval((function(){return m.redraw()}));e?this.$(".hide").slideUp(250,(function(){return clearInterval(t)})):this.$(".hide").slideDown(250,(function(){return clearInterval(t)})),this.attrs.set(e),this.checked(e)},t}(p()),b=function(e){if(!e)return!1;var t=e.attribute("fof-prevent-necrobumping"),o=e.lastPostedAt();return!!(o&&t&&dayjs().subtract(t,"days").isAfter(o.getTime()))&&t};r().initializers.add("fof/prevent-necrobumping",(function(){(0,n.override)(a().prototype,"view",(function(e,t){return this.attrs.disabled=this.attrs.disabled||b(this.attrs.discussion)&&!this.composer.fields.fofNecrobumping,e(t)})),(0,n.extend)(a().prototype,"headerItems",(function(e){var t=this,o=b(this.attrs.discussion);o&&e.add("fof-necrobumping",h.component({days:o,set:function(e){return t.composer.fields.fofNecrobumping=e}}))})),(0,n.extend)(a().prototype,"data",(function(e){e["fof-necrobumping"]=this.composer.fields.fofNecrobumping}))}));var v={NecrobumpingCheck:h}})(),module.exports=t})();
//# sourceMappingURL=forum.js.map